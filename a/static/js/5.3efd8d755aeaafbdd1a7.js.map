{"version":3,"sources":["webpack:///src/page/orderManagement/assignList.vue","webpack:///./src/page/orderManagement/assignList.vue?ca2a","webpack:///./src/page/orderManagement/assignList.vue"],"names":["assignList","name","data","dialogVisible","select","mealDate","mealTime","schoolId","mealTimeArr","BREAKFAST","LUNCH","DINNER","defaultMenuActive","defaultMenuOpeneds","detailSelect","schoolSelect","dateSelect","mealTimeSelect","dateData","gradeData","classData","listData","listAllData","listGradeData","listClassData","listOrderData","menuData","methods","formatAmount","val","str","toFixed","substring","indexOf","replace","length","formatNumber","changeDate","date","this","getAssignMenu","changeMenu","i","getAssignMealTimeList","changeMenuItem","getAssignGradeList","handleTabClick","tab","event","console","log","getAssignClassList","getAssignOrderList","clearSelect","clearList","_this","datas","common","then","res","list","forEach","el","schoolList","foodList","e","j","push","schoolName","foodAmount","getAssignAllList","_this2","rowId","foodName","_this3","_this4","gradeName","_this5","classList","f","k","className","foodId","split","_this6","dinerName","getAssignDate","_this7","weekday","exportForm","getOrderExport","mounted","orderManagement_assignList","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","inline","_l","item","index","key","span","size","type","on","click","$event","_v","_s","default-active","default-openeds","unique-opened","open","group","slot","school","idx","staticStyle","margin-top","width","highlight-current-row","border","prop","label","_e","Object","keys","tab-click","model","value","callback","$$v","expression","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"4IAuFAA,GACAC,KAAA,YACAC,KAFA,WAGA,OACAC,eAAA,EACAC,QACAC,SAAA,GACAC,SAAA,GACAC,SAAA,GAEAC,aACAC,UAAA,KACAC,MAAA,KACAC,OAAA,MAEAC,kBAAA,GACAC,sBACAC,aAAA,QACAC,aAAA,GACAC,WAAA,GACAC,eAAA,GACAC,YACAC,aACAC,aACAC,YACAC,eACAC,iBACAC,iBACAC,iBACAC,cAGAC,SACAC,aADA,SACAC,GACA,IAAAC,GAAA,IAAAD,EAAA,KAAAE,QAAA,MAIA,OAHAD,EAAAE,UAAA,EAAAF,EAAAG,QAAA,MAAAC,QAAA,0BACAJ,EAAAE,UAAAF,EAAAK,OAAAL,EAAAG,QAAA,OAIAG,aARA,SAQAN,GAEA,OADAA,EAAAI,QAAA,2BAGAG,WAZA,SAYAC,GACAC,KAAAvB,WAAAsB,EACAC,KAAAC,iBAEAC,WAhBA,SAgBAC,GACAH,KAAAI,sBAAAD,IAEAE,eAnBA,SAmBAtC,EAAAC,GACAgC,KAAAnC,OAAAE,WACAiC,KAAAnC,OAAAG,WACAgC,KAAAM,sBAEAC,eAxBA,SAwBAC,EAAAC,GACA,IAAA/C,EAAA8C,EAAA9C,KACAgD,QAAAC,IAAAjD,GACA,SAAAA,EACAsC,KAAAM,qBACA,SAAA5C,EACAsC,KAAAY,qBACA,SAAAlD,GACAsC,KAAAa,sBAGAC,YAnCA,WAoCAd,KAAAnC,QACAC,SAAA,GACAC,SAAA,GACAC,SAAA,IAGA+C,UA1CA,WA2CAf,KAAAnC,QACAC,SAAA,GACAC,SAAA,GACAC,SAAA,IAGAiC,cAjDA,WAiDA,IAAAe,EAAAhB,KACAA,KAAAb,YACAa,KAAAtB,eAAA,GACAsB,KAAAjB,eACAiB,KAAAhB,iBACA,IAAAiC,GACAnD,SAAAkC,KAAAvB,YAEMyC,EAAA,EAANjB,cAAAgB,GAAAE,KAAA,SAAAC,GACA,IAAAC,KACAD,EAAAzD,MACAyD,EAAAzD,KAAA0D,KAAAC,QAAA,SAAAC,EAAApB,GACA,IAAAqB,KACAD,EAAAE,SAAAH,QAAA,SAAAI,EAAAC,GACAH,EAAAI,MAEA5D,SAAA0D,EAAA1D,SACA6D,WAAAH,EAAAG,WACAC,WAAAJ,EAAAI,eAKAT,EAAAO,MAEAlE,KAAAsD,EAAA/C,YAAAsD,EAAAxD,UACAA,SAAAwD,EAAAxD,SACAyD,iBAKAR,EAAA7B,SAAAkC,EACAL,EAAA3C,kBAAA,GACA2C,EAAA1C,sBACA0C,EAAAe,sBAGAA,iBAvFA,WAuFA,IAAAC,EAAAhC,KACAiB,GACAnD,SAAAkC,KAAAvB,YAEMyC,EAAA,EAANa,iBAAAd,GAAAE,KAAA,SAAAC,GACA,IAAAC,KACAD,EAAAzD,MACAyD,EAAAzD,KAAA0D,KAAAC,QAAA,SAAAC,EAAApB,GACA,IAAA8B,EAAA,EACAR,KACAF,EAAAE,SAAAH,QAAA,SAAAI,EAAAC,GACAF,EAAAG,MAEAK,QACAC,SAAAR,EAAAQ,SACAJ,WAAAJ,EAAAI,aAGAG,MAGAZ,EAAAO,MAEAlE,KAAAsE,EAAA/D,YAAAsD,EAAAxD,UACA+D,WAAAP,EAAAO,WAGAL,eAKAO,EAAAjD,YAAAsC,KAGAjB,sBA1HA,SA0HArC,GAAA,IAAAoE,EAAAnC,KACAiB,GACAnD,SAAAkC,KAAAvB,WACAV,YAEMmD,EAAA,EAANd,sBAAAa,GAAAE,KAAA,SAAAC,GACA,IAAAC,KACAD,EAAAzD,MACAyD,EAAAzD,KAAA0D,KAAAC,QAAA,SAAAC,EAAApB,GACA,IAAA8B,EAAA,EACAR,KACAF,EAAAE,SAAAH,QAAA,SAAAI,EAAAC,GACAF,EAAAG,MAEAK,QACAC,SAAAR,EAAAQ,SACAJ,WAAAJ,EAAAI,aAGAG,MAGAZ,EAAAO,MAEAlE,KAAAyE,EAAAlE,YAAAsD,EAAAxD,UACA+D,WAAAP,EAAAO,WAEAL,eAKAU,EAAApD,YAAAsC,KAGAf,mBA7JA,WA6JA,IAAA8B,EAAApC,KACAA,KAAAjB,eACAiB,KAAAhB,iBACA,IAAAiC,GACAnD,SAAAkC,KAAAvB,WACAV,SAAAiC,KAAAnC,OAAAE,SACAC,SAAAgC,KAAAnC,OAAAG,UAEMkD,EAAA,EAANZ,mBAAAW,GAAAE,KAAA,SAAAC,GACA,IAAAC,KACAD,EAAAzD,MACAyD,EAAAzD,KAAA0D,KAAAC,QAAA,SAAAC,EAAApB,GACA,IAAA8B,EAAA,EACAR,KACAF,EAAAE,SAAAH,QAAA,SAAAI,EAAAC,GACAF,EAAAG,MAEAK,QACAC,SAAAR,EAAAQ,SACAJ,WAAAJ,EAAAI,aAGAG,MAGAZ,EAAAO,MAEAlE,KAAA6D,EAAAc,UACAP,WAAAP,EAAAO,WAEAL,eAKAW,EAAApD,cAAAqC,KAGAT,mBAnMA,WAmMA,IAAA0B,EAAAtC,KACAA,KAAAjB,eACAiB,KAAAf,iBACA,IAAAgC,GACAnD,SAAAkC,KAAAvB,WACAV,SAAAiC,KAAAnC,OAAAE,SACAC,SAAAgC,KAAAnC,OAAAG,UAEMkD,EAAA,EAANN,mBAAAK,GAAAE,KAAA,SAAAC,GACA,IAAAC,KACAD,EAAAzD,MACAyD,EAAAzD,KAAA0D,KAAAC,QAAA,SAAAC,EAAApB,GACA,IAAA8B,EAAA,EACAM,KACAhB,EAAAE,SAAAH,QAAA,SAAAI,EAAAC,GAEA,IAAAF,KACAC,EAAAD,SAAAH,QAAA,SAAAkB,EAAAC,GACAhB,EAAAG,MAEAM,SAAAM,EAAAN,SACAJ,WAAAU,EAAAV,eAIAS,EAAAX,MAEAK,QACAS,UAAAhB,EAAAgB,UACAZ,WAAAJ,EAAAI,WAEAL,aAGAQ,MAGAZ,EAAAO,MAEAlE,KAAA6D,EAAAc,UACAP,WAAAP,EAAAO,WAEAa,OAAApB,EAAAoB,OAAAC,MAAA,KACAV,SAAAX,EAAAW,SAAAU,MAAA,KAEAL,gBAKAD,EAAArD,cAAAoC,KAGAR,mBAxPA,WAwPA,IAAAgC,EAAA7C,KACAA,KAAAjB,eACAiB,KAAAd,iBACA,IAAA+B,GACAnD,SAAAkC,KAAAvB,WACAV,SAAAiC,KAAAnC,OAAAE,SACAC,SAAAgC,KAAAnC,OAAAG,UAEMkD,EAAA,EAANL,mBAAAI,GAAAE,KAAA,SAAAC,GACA,IAAAC,KACAY,EAAA,EACAb,EAAAzD,MACAyD,EAAAzD,KAAA0D,KAAAC,QAAA,SAAAC,EAAApB,GAEAkB,EAAAO,MAEAK,QACAC,SAAAX,EAAAW,SACAY,UAAAvB,EAAAuB,UACAjB,WAAAN,EAAAM,WACAQ,UAAAd,EAAAc,UACAK,UAAAnB,EAAAmB,YAGAT,MAGAY,EAAA3D,cAAAmC,KAGA0B,cAtRA,WAsRA,IAAAC,EAAAhD,KACMkB,EAAA,EAAN6B,gBAAA5B,KAAA,SAAAC,GACA,GAAAA,EAAAzD,KAAA,CACA,IAAA0D,KACAD,EAAAzD,KAAA0D,KAAAC,QAAA,SAAAC,EAAApB,GACA,GAAAA,IACA6C,EAAAvE,WAAA8C,EAAAxB,KACAiD,EAAA/C,iBAEAoB,EAAAO,MAEA7B,KAAAwB,EAAAxB,KACAkD,QAAA1B,EAAA0B,YAIAD,EAAArE,SAAA0C,MAIA6B,WA1SA,WA6SMhC,EAAA,EAANiC,mBAAAhC,KAAA,SAAAC,GACAA,EAAAzD,SAKAyF,QAnVA,WAoVApD,KAAA+C,kBCxaeM,GADEC,OAFjB,WAA0B,IAAAC,EAAAvD,KAAawD,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,cAAwBF,EAAA,OAAYE,YAAA,YAAsBF,EAAA,OAAYE,YAAA,cAAwBF,EAAA,WAAgBE,YAAA,cAAAC,OAAiCC,QAAA,KAAeJ,EAAA,SAAAH,EAAAQ,GAAAR,EAAA,kBAAAS,EAAAC,GAAyD,OAAAP,EAAA,UAAoBQ,IAAAD,EAAAJ,OAAiBM,KAAA,KAAUT,EAAA,gBAAAA,EAAA,aAAqCG,OAAOO,KAAA,QAAAC,KAAAd,EAAA9E,YAAAuF,EAAAjE,KAAA,qBAA0EuE,IAAKC,MAAA,SAAAC,GAAyB,OAAAjB,EAAAzD,WAAAkE,EAAAjE,UAAmCwD,EAAAkB,GAAA,qBAAAlB,EAAAmB,GAAAV,EAAAjE,MAAA,IAAAwD,EAAAmB,GAAAV,EAAAf,SAAA,iBAAwF,WAAAM,EAAAkB,GAAA,KAAAf,EAAA,UAAAA,EAAA,UAAmDG,OAAOM,KAAA,KAAUT,EAAA,WAAgBG,OAAOc,iBAAApB,EAAAlF,kBAAAuG,kBAAArB,EAAAjF,mBAAAuG,iBAAA,GAAqGP,IAAKQ,KAAAvB,EAAArD,aAAuBqD,EAAAQ,GAAAR,EAAA,kBAAAwB,EAAAd,GAA6C,OAAAP,EAAA,cAAwBQ,IAAAD,EAAAJ,OAAiBI,MAAAc,EAAAhH,YAAwB2F,EAAA,YAAiBsB,KAAA,UAAatB,EAAA,KAAUE,YAAA,mBAA6BL,EAAAkB,GAAA,KAAAf,EAAA,QAAAH,EAAAkB,GAAAlB,EAAAmB,GAAAK,EAAArH,WAAA6F,EAAAkB,GAAA,KAAAf,EAAA,qBAAAH,EAAAQ,GAAAgB,EAAA,oBAAAE,EAAAC,GAA2I,OAAAxB,EAAA,gBAA0BQ,IAAAgB,EAAArB,OAAeI,QAAA,IAAAiB,GAA0BZ,IAAKC,MAAA,SAAAC,GAAyB,OAAAjB,EAAAlD,eAAA0E,EAAAhH,SAAAkH,EAAAjH,cAA6DuF,EAAAkB,GAAA,qBAAAlB,EAAAmB,GAAAO,EAAApD,YAAA,IAAA0B,EAAAmB,GAAAO,EAAAnD,YAAA,UAA8F,SAAS,OAAAyB,EAAAkB,GAAA,KAAAf,EAAA,UAAkCG,OAAOM,KAAA,MAAWZ,EAAA,YAAAG,EAAA,OAA8BE,YAAA,WAAAuB,aAAoCC,aAAA,SAAqB7B,EAAAQ,GAAAR,EAAA,qBAAAwB,EAAAd,GAAgD,OAAAP,EAAA,UAAoBQ,IAAAD,IAAUP,EAAA,UAAAH,EAAAkB,GAAA,mBAAAlB,EAAAmB,GAAAK,EAAArH,MAAA,OAAA6F,EAAAmB,GAAAK,EAAAjD,YAAA,qBAAAyB,EAAAkB,GAAA,KAAAf,EAAA,YAA4IyB,aAAaE,MAAA,QAAexB,OAAQlG,KAAAoH,EAAAtD,SAAA6D,wBAAA,GAAAC,OAAA,MAA8D7B,EAAA,mBAAwBG,OAAO2B,KAAA,QAAAC,MAAA,KAAAJ,MAAA,QAA0C9B,EAAAkB,GAAA,KAAAf,EAAA,mBAAoCG,OAAO2B,KAAA,WAAAC,MAAA,QAAgClC,EAAAkB,GAAA,KAAAf,EAAA,mBAAoCG,OAAO2B,KAAA,aAAAC,MAAA,SAAkC,SAAU,GAAAlC,EAAAmC,KAAAnC,EAAAkB,GAAA,KAAAkB,OAAAC,KAAArC,EAAAvE,eAAAY,OAAA,EAAA8D,EAAA,OAAgFE,YAAA,WAAAuB,aAAoCC,aAAA,UAAqB1B,EAAA,WAAgBG,OAAOQ,KAAA,QAAcC,IAAKuB,YAAAtC,EAAAhD,gBAA+BuF,OAAQC,MAAAxC,EAAA,aAAAyC,SAAA,SAAAC,GAAkD1C,EAAAhF,aAAA0H,GAAqBC,WAAA,kBAA4BxC,EAAA,eAAoBG,OAAO4B,MAAA,OAAA/H,KAAA,UAA+B6F,EAAAQ,GAAAR,EAAA,uBAAAwB,EAAAd,GAAkD,OAAAP,EAAA,UAAoBQ,IAAAD,IAAUP,EAAA,UAAAH,EAAAkB,GAAA,uBAAAlB,EAAAmB,GAAAK,EAAArH,MAAA,OAAA6F,EAAAmB,GAAAK,EAAAjD,YAAA,yBAAAyB,EAAAkB,GAAA,KAAAf,EAAA,YAAoJyB,aAAaE,MAAA,QAAexB,OAAQlG,KAAAoH,EAAAtD,SAAA6D,wBAAA,GAAAC,OAAA,MAA8D7B,EAAA,mBAAwBG,OAAO2B,KAAA,QAAAC,MAAA,KAAAJ,MAAA,QAA0C9B,EAAAkB,GAAA,KAAAf,EAAA,mBAAoCG,OAAO2B,KAAA,WAAAC,MAAA,QAAgClC,EAAAkB,GAAA,KAAAf,EAAA,mBAAoCG,OAAO2B,KAAA,aAAAC,MAAA,SAAkC,SAAU,GAAAlC,EAAAkB,GAAA,KAAAf,EAAA,eAAmCG,OAAO4B,MAAA,OAAA/H,KAAA,WAA+BgG,EAAA,YAAiByB,aAAaE,MAAA,QAAexB,OAAQlG,KAAA4F,EAAArE,cAAAoG,wBAAA,GAAAC,OAAA,MAAiE7B,EAAA,mBAAwBG,OAAO2B,KAAA,QAAAC,MAAA,KAAAJ,MAAA,QAA0C9B,EAAAkB,GAAA,KAAAf,EAAA,mBAAoCG,OAAO2B,KAAA,WAAAC,MAAA,QAAgClC,EAAAkB,GAAA,KAAAf,EAAA,mBAAoCG,OAAO2B,KAAA,YAAAC,MAAA,QAAiClC,EAAAkB,GAAA,KAAAf,EAAA,mBAAoCG,OAAO2B,KAAA,YAAAC,MAAA,SAAiC,eAAAlC,EAAAmC,QAAA,UAEl9GS,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACE7I,EACA4F,GATF,EAVA,SAAAkD,GACEF,EAAQ,SAaV,KAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/5.3efd8d755aeaafbdd1a7.js","sourcesContent":["<template>\r\n  <div class=\"orderList\">\r\n    <div class=\"wrapper\">\r\n      <div class=\"queryList\">\r\n        <el-form :inline=\"true\" class=\"form-inline\">\r\n          <el-row>\r\n            <el-col :span=\"3\" v-for=\"(item, index) in dateData\" :key=\"index\">\r\n              <el-form-item>\r\n                <el-button size=\"small\" :type=\"dateSelect == item.date ? 'primary' : 'default'\" @click=\"changeDate(item.date)\">\r\n                  {{item.date}}({{item.weekday}})</el-button>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n        </el-form>\r\n      </div>\r\n      <el-row>\r\n        <el-col :span=\"6\">\r\n          <el-menu :default-active=\"defaultMenuActive\" :default-openeds=\"defaultMenuOpeneds\" :unique-opened=\"true\" @open=\"changeMenu\">\r\n            <el-submenu v-for=\"(group, index) in menuData\" :key=\"index\" :index=\"group.mealTime\">\r\n              <template slot=\"title\">\r\n                <i class=\"el-icon-burger\"></i>\r\n                <span>{{group.name}}</span>\r\n              </template>\r\n              <el-menu-item-group>\r\n                <el-menu-item v-for=\"(school, idx) in group.schoolList\" :key=\"idx\" :index=\"index + '-' + idx\"\r\n                  @click=\"changeMenuItem(group.mealTime, school.schoolId)\">\r\n                  {{school.schoolName}}({{school.foodAmount}}份)</el-menu-item>\r\n              </el-menu-item-group>\r\n            </el-submenu>\r\n          </el-menu>\r\n        </el-col>\r\n        <el-col :span=\"18\">\r\n          <div class=\"tableCom\" style=\"margin-top: 15px;\" v-if=\"listAllData\">\r\n            <el-row v-for=\"(group, index) in listAllData\" :key=\"index\">\r\n              <el-row>\r\n                {{group.name}} 合计：{{group.foodAmount}}份\r\n              </el-row>\r\n              <el-table :data=\"group.foodList\" highlight-current-row border style=\"width: 100%\">\r\n                <el-table-column prop=\"rowId\" label='序号' width=\"50\">\r\n                </el-table-column>\r\n                <el-table-column prop=\"foodName\" label='菜品'>\r\n                </el-table-column>\r\n                <el-table-column prop=\"foodAmount\" label='份数'>\r\n                </el-table-column>\r\n              </el-table>\r\n            </el-row>\r\n          </div>\r\n          <div class=\"tableCom\" style=\"margin-top: 15px;\" v-if=\"Object.keys(listGradeData).length > 0\">\r\n            <el-tabs v-model=\"detailSelect\" type=\"card\" @tab-click=\"handleTabClick\">\r\n              <el-tab-pane label=\"部门总览\" name=\"grade\">\r\n                <el-row v-for=\"(group, index) in listGradeData\" :key=\"index\">\r\n                  <el-row>\r\n                    {{group.name}} 合计：{{group.foodAmount}}份\r\n                  </el-row>\r\n                  <el-table :data=\"group.foodList\" highlight-current-row border style=\"width: 100%\">\r\n                    <el-table-column prop=\"rowId\" label='序号' width=\"50\">\r\n                    </el-table-column>\r\n                    <el-table-column prop=\"foodName\" label='菜品'>\r\n                    </el-table-column>\r\n                    <el-table-column prop=\"foodAmount\" label='份数'>\r\n                    </el-table-column>\r\n                  </el-table>\r\n                </el-row>\r\n              </el-tab-pane>\r\n              <el-tab-pane label=\"订单明细\" name=\"order\">\r\n\r\n                <el-table :data=\"listOrderData\" highlight-current-row border style=\"width: 100%\">\r\n                  <el-table-column prop=\"rowId\" label='序号' width=\"50\">\r\n                  </el-table-column>\r\n                  <el-table-column prop=\"foodName\" label='菜品'>\r\n                  </el-table-column>\r\n                  <el-table-column prop=\"dinerName\" label='姓名'>\r\n                  </el-table-column>\r\n                  <el-table-column prop=\"gradeName\" label='部门'>\r\n                  </el-table-column>\r\n                </el-table>\r\n\r\n              </el-tab-pane>\r\n            </el-tabs>\r\n          </div>\r\n        </el-col>\r\n      </el-row>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { OrderModule } from \"@/api/common\";\r\nexport default {\r\n  name: 'orderList',\r\n  data () {\r\n    return {\r\n      dialogVisible: false,\r\n      select: {\r\n        mealDate: \"\",\r\n        mealTime: '',\r\n        schoolId: 0,\r\n      },\r\n      mealTimeArr: {\r\n        'BREAKFAST': '早餐',\r\n        'LUNCH': '午餐',\r\n        'DINNER': '晚餐'\r\n      },\r\n      defaultMenuActive: \"\",\r\n      defaultMenuOpeneds: [],\r\n      detailSelect: \"grade\",\r\n      schoolSelect: \"\",\r\n      dateSelect: \"\",\r\n      mealTimeSelect: \"\",\r\n      dateData: [],\r\n      gradeData: [],\r\n      classData: [],\r\n      listData: [],\r\n      listAllData: [],\r\n      listGradeData: [],\r\n      listClassData: [],\r\n      listOrderData: [],\r\n      menuData: [],\r\n    }\r\n  },\r\n  methods: {\r\n    formatAmount (val) {\r\n      var str = (val * 100 / 100).toFixed(2) + '';\r\n      var intSum = str.substring(0, str.indexOf(\".\")).replace(/\\B(?=(?:\\d{3})+$)/g, ',');//取到整数部分\r\n      var dot = str.substring(str.length, str.indexOf(\".\"))//取到小数部分搜索\r\n      var ret = intSum + dot;\r\n      return ret;\r\n    },\r\n    formatNumber (str) {\r\n      var intSum = str.replace(/\\B(?=(?:\\d{3})+$)/g, ',');//取到整数部分\r\n      return intSum;\r\n    },\r\n    changeDate (date) {\r\n      this.dateSelect = date;\r\n      this.getAssignMenu();\r\n    },\r\n    changeMenu (i) {\r\n      this.getAssignMealTimeList(i);\r\n    },\r\n    changeMenuItem (mealTime, schoolId) {\r\n      this.select.mealTime = mealTime;\r\n      this.select.schoolId = schoolId;\r\n      this.getAssignGradeList();\r\n    },\r\n    handleTabClick (tab, event) {\r\n      let name = tab.name;\r\n      console.log(name);\r\n      if (name == 'grade') {\r\n        this.getAssignGradeList();\r\n      } else if (name == 'class') {\r\n        this.getAssignClassList();\r\n      } else if (name == 'order') {\r\n        this.getAssignOrderList();\r\n      }\r\n    },\r\n    clearSelect () {\r\n      this.select = {\r\n        mealDate: \"\",\r\n        mealTime: '',\r\n        schoolId: 0,\r\n      };\r\n    },\r\n    clearList () {\r\n      this.select = {\r\n        mealDate: \"\",\r\n        mealTime: '',\r\n        schoolId: 0,\r\n      };\r\n    },\r\n    getAssignMenu () {\r\n      this.menuData = [];\r\n      this.mealTimeSelect = \"\";\r\n      this.listAllData = [];\r\n      this.listGradeData = [];\r\n      let datas = {\r\n        mealDate: this.dateSelect,\r\n      };\r\n      OrderModule.getAssignMenu(datas).then(res => {\r\n        let list = [];\r\n        if (res.data) {\r\n          res.data.list.forEach((el, i) => {\r\n            let schoolList = [];\r\n            el.foodList.forEach((e, j) => {\r\n              schoolList.push({\r\n\r\n                schoolId: e.schoolId,\r\n                schoolName: e.schoolName,\r\n                foodAmount: e.foodAmount,\r\n\r\n              });\r\n            });\r\n\r\n            list.push({\r\n\r\n              name: this.mealTimeArr[el.mealTime],\r\n              mealTime: el.mealTime,\r\n              schoolList: schoolList\r\n\r\n            });\r\n          });\r\n        }\r\n        this.menuData = list;\r\n        this.defaultMenuActive = \"\";\r\n        this.defaultMenuOpeneds = [];\r\n        this.getAssignAllList();\r\n      });\r\n    },\r\n    getAssignAllList () {\r\n      let datas = {\r\n        mealDate: this.dateSelect,\r\n      };\r\n      OrderModule.getAssignAllList(datas).then(res => {\r\n        let list = [];\r\n        if (res.data) {\r\n          res.data.list.forEach((el, i) => {\r\n            let rowId = 1;\r\n            let foodList = [];\r\n            el.foodList.forEach((e, j) => {\r\n              foodList.push({\r\n\r\n                rowId: rowId,\r\n                foodName: e.foodName,\r\n                foodAmount: e.foodAmount,\r\n\r\n              });\r\n              rowId++;\r\n            });\r\n\r\n            list.push({\r\n\r\n              name: this.mealTimeArr[el.mealTime],\r\n              foodAmount: el.foodAmount,\r\n\r\n\r\n              foodList: foodList,\r\n\r\n            });\r\n          });\r\n        }\r\n        this.listAllData = list;\r\n      });\r\n    },\r\n    getAssignMealTimeList (mealTime) {\r\n      let datas = {\r\n        mealDate: this.dateSelect,\r\n        mealTime: mealTime,\r\n      };\r\n      OrderModule.getAssignMealTimeList(datas).then(res => {\r\n        let list = [];\r\n        if (res.data) {\r\n          res.data.list.forEach((el, i) => {\r\n            let rowId = 1;\r\n            let foodList = [];\r\n            el.foodList.forEach((e, j) => {\r\n              foodList.push({\r\n\r\n                rowId: rowId,\r\n                foodName: e.foodName,\r\n                foodAmount: e.foodAmount,\r\n\r\n              });\r\n              rowId++;\r\n            });\r\n\r\n            list.push({\r\n\r\n              name: this.mealTimeArr[el.mealTime],\r\n              foodAmount: el.foodAmount,\r\n\r\n              foodList: foodList,\r\n\r\n            });\r\n          });\r\n        }\r\n        this.listAllData = list;\r\n      });\r\n    },\r\n    getAssignGradeList () {\r\n      this.listAllData = [];\r\n      this.listGradeData = [];\r\n      let datas = {\r\n        mealDate: this.dateSelect,\r\n        mealTime: this.select.mealTime,\r\n        schoolId: this.select.schoolId\r\n      };\r\n      OrderModule.getAssignGradeList(datas).then(res => {\r\n        let list = [];\r\n        if (res.data) {\r\n          res.data.list.forEach((el, i) => {\r\n            let rowId = 1;\r\n            let foodList = [];\r\n            el.foodList.forEach((e, j) => {\r\n              foodList.push({\r\n\r\n                rowId: rowId,\r\n                foodName: e.foodName,\r\n                foodAmount: e.foodAmount,\r\n\r\n              });\r\n              rowId++;\r\n            });\r\n\r\n            list.push({\r\n\r\n              name: el.gradeName,\r\n              foodAmount: el.foodAmount,\r\n\r\n              foodList: foodList,\r\n\r\n            });\r\n          });\r\n        }\r\n        this.listGradeData = list;\r\n      });\r\n    },\r\n    getAssignClassList () {\r\n      this.listAllData = [];\r\n      this.listClassData = [];\r\n      let datas = {\r\n        mealDate: this.dateSelect,\r\n        mealTime: this.select.mealTime,\r\n        schoolId: this.select.schoolId\r\n      };\r\n      OrderModule.getAssignClassList(datas).then(res => {\r\n        let list = [];\r\n        if (res.data) {\r\n          res.data.list.forEach((el, i) => {\r\n            let rowId = 1;\r\n            let classList = [];\r\n            el.foodList.forEach((e, j) => {\r\n\r\n              let foodList = [];\r\n              e.foodList.forEach((f, k) => {\r\n                foodList.push({\r\n\r\n                  foodName: f.foodName,\r\n                  foodAmount: f.foodAmount,\r\n\r\n                });\r\n              });\r\n              classList.push({\r\n\r\n                rowId: rowId,\r\n                className: e.className,\r\n                foodAmount: e.foodAmount,\r\n\r\n                foodList: foodList,\r\n\r\n              });\r\n              rowId++;\r\n            });\r\n\r\n            list.push({\r\n\r\n              name: el.gradeName,\r\n              foodAmount: el.foodAmount,\r\n\r\n              foodId: el.foodId.split(','),\r\n              foodName: el.foodName.split(','),\r\n\r\n              classList: classList,\r\n\r\n            });\r\n          });\r\n        }\r\n        this.listClassData = list;\r\n      });\r\n    },\r\n    getAssignOrderList () {\r\n      this.listAllData = [];\r\n      this.listOrderData = [];\r\n      let datas = {\r\n        mealDate: this.dateSelect,\r\n        mealTime: this.select.mealTime,\r\n        schoolId: this.select.schoolId\r\n      };\r\n      OrderModule.getAssignOrderList(datas).then(res => {\r\n        let list = [];\r\n        let rowId = 1;\r\n        if (res.data) {\r\n          res.data.list.forEach((el, i) => {\r\n\r\n            list.push({\r\n\r\n              rowId: rowId,\r\n              foodName: el.foodName,\r\n              dinerName: el.dinerName,\r\n              schoolName: el.schoolName,\r\n              gradeName: el.gradeName,\r\n              className: el.className,\r\n\r\n            });\r\n            rowId++;\r\n          });\r\n        }\r\n        this.listOrderData = list;\r\n      });\r\n    },\r\n    getAssignDate () {\r\n      OrderModule.getAssignDate().then(res => {\r\n        if (res.data) {\r\n          let list = [];\r\n          res.data.list.forEach((el, i) => {\r\n            if (i == 0) {\r\n              this.dateSelect = el.date;\r\n              this.getAssignMenu();\r\n            }\r\n            list.push({\r\n\r\n              date: el.date,\r\n              weekday: el.weekday,\r\n\r\n            });\r\n          });\r\n          this.dateData = list;\r\n        }\r\n      });\r\n    },\r\n    exportForm () {\r\n      let datas = {\r\n      };\r\n      OrderModule.getOrderExport(datas).then(res => {\r\n        if (res.data) {\r\n        }\r\n      });\r\n    },\r\n  },\r\n  mounted () {\r\n    this.getAssignDate();\r\n  }\r\n}\r\n</script>\r\n<style lang=\"\">\r\n.queryList {\r\n  border: 1px solid #eee;\r\n  padding: 10px 15px 0px 15px;\r\n}\r\n.queryList .el-form-item {\r\n  margin-bottom: 12px;\r\n}\r\n.order-detail /deep/ .el-pagination {\r\n  margin-top: 10px;\r\n  font-size: 13px !important;\r\n}\r\n.queryList /deep/ .el-form-item__label {\r\n  font-size: 13px !important;\r\n}\r\n.statistics .el-alert {\r\n  margin: 10px 0;\r\n}\r\n.dataTotal {\r\n  margin-top: 15px;\r\n  text-align: center;\r\n  padding: 5px;\r\n  border: 1px solid #eee;\r\n  font-size: 12px;\r\n}\r\n.dataTotal .num {\r\n  color: #f56c6c;\r\n  font-size: 16px;\r\n  padding: 5px 0;\r\n}\r\n.dataTotal .left {\r\n  padding: 5px 0;\r\n}\r\n.dataTotal .left i {\r\n  color: #409eff;\r\n  font-size: 14px;\r\n  margin-left: 3px;\r\n}\r\n.dataTotal .el-col {\r\n  border-right: 4px solid #409eff;\r\n}\r\n.dialogBox .el-col {\r\n  font-size: 12px;\r\n}\r\n.info .el-col {\r\n  padding: 2px 0;\r\n}\r\n\r\n.el-collapse {\r\n  border-top: 0;\r\n  border-bottom: 0;\r\n}\r\n.el-collapse-item__header {\r\n  border-bottom: 0;\r\n}\r\n.el-collapse-item__wrap {\r\n  padding-top: 20px;\r\n  border-top: 1px solid #ebeef5;\r\n  border-bottom: 0;\r\n}\r\n.el-collapse-item__header span {\r\n  font-weight: normal;\r\n}\r\n.el-collapse-item:last-child {\r\n  margin-bottom: 0;\r\n}\r\n.el-collapse-item__content {\r\n  padding-bottom: 0;\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/page/orderManagement/assignList.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"orderList\"},[_c('div',{staticClass:\"wrapper\"},[_c('div',{staticClass:\"queryList\"},[_c('el-form',{staticClass:\"form-inline\",attrs:{\"inline\":true}},[_c('el-row',_vm._l((_vm.dateData),function(item,index){return _c('el-col',{key:index,attrs:{\"span\":3}},[_c('el-form-item',[_c('el-button',{attrs:{\"size\":\"small\",\"type\":_vm.dateSelect == item.date ? 'primary' : 'default'},on:{\"click\":function($event){return _vm.changeDate(item.date)}}},[_vm._v(\"\\n                \"+_vm._s(item.date)+\"(\"+_vm._s(item.weekday)+\")\")])],1)],1)}),1)],1)],1),_vm._v(\" \"),_c('el-row',[_c('el-col',{attrs:{\"span\":6}},[_c('el-menu',{attrs:{\"default-active\":_vm.defaultMenuActive,\"default-openeds\":_vm.defaultMenuOpeneds,\"unique-opened\":true},on:{\"open\":_vm.changeMenu}},_vm._l((_vm.menuData),function(group,index){return _c('el-submenu',{key:index,attrs:{\"index\":group.mealTime}},[_c('template',{slot:\"title\"},[_c('i',{staticClass:\"el-icon-burger\"}),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(group.name))])]),_vm._v(\" \"),_c('el-menu-item-group',_vm._l((group.schoolList),function(school,idx){return _c('el-menu-item',{key:idx,attrs:{\"index\":index + '-' + idx},on:{\"click\":function($event){return _vm.changeMenuItem(group.mealTime, school.schoolId)}}},[_vm._v(\"\\n                \"+_vm._s(school.schoolName)+\"(\"+_vm._s(school.foodAmount)+\"份)\")])}),1)],2)}),1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":18}},[(_vm.listAllData)?_c('div',{staticClass:\"tableCom\",staticStyle:{\"margin-top\":\"15px\"}},_vm._l((_vm.listAllData),function(group,index){return _c('el-row',{key:index},[_c('el-row',[_vm._v(\"\\n              \"+_vm._s(group.name)+\" 合计：\"+_vm._s(group.foodAmount)+\"份\\n            \")]),_vm._v(\" \"),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":group.foodList,\"highlight-current-row\":\"\",\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"rowId\",\"label\":\"序号\",\"width\":\"50\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"foodName\",\"label\":\"菜品\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"foodAmount\",\"label\":\"份数\"}})],1)],1)}),1):_vm._e(),_vm._v(\" \"),(Object.keys(_vm.listGradeData).length > 0)?_c('div',{staticClass:\"tableCom\",staticStyle:{\"margin-top\":\"15px\"}},[_c('el-tabs',{attrs:{\"type\":\"card\"},on:{\"tab-click\":_vm.handleTabClick},model:{value:(_vm.detailSelect),callback:function ($$v) {_vm.detailSelect=$$v},expression:\"detailSelect\"}},[_c('el-tab-pane',{attrs:{\"label\":\"部门总览\",\"name\":\"grade\"}},_vm._l((_vm.listGradeData),function(group,index){return _c('el-row',{key:index},[_c('el-row',[_vm._v(\"\\n                  \"+_vm._s(group.name)+\" 合计：\"+_vm._s(group.foodAmount)+\"份\\n                \")]),_vm._v(\" \"),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":group.foodList,\"highlight-current-row\":\"\",\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"rowId\",\"label\":\"序号\",\"width\":\"50\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"foodName\",\"label\":\"菜品\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"foodAmount\",\"label\":\"份数\"}})],1)],1)}),1),_vm._v(\" \"),_c('el-tab-pane',{attrs:{\"label\":\"订单明细\",\"name\":\"order\"}},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.listOrderData,\"highlight-current-row\":\"\",\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"rowId\",\"label\":\"序号\",\"width\":\"50\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"foodName\",\"label\":\"菜品\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"dinerName\",\"label\":\"姓名\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"gradeName\",\"label\":\"部门\"}})],1)],1)],1)],1):_vm._e()])],1)],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5ec3612e\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/page/orderManagement/assignList.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5ec3612e\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./assignList.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./assignList.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./assignList.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5ec3612e\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./assignList.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/orderManagement/assignList.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}