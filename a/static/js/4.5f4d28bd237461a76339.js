webpackJsonp([4],{"/+g+":function(e,t){},d4yq:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o("//Fk"),a=o.n(i),r=o("t5DY"),s={name:"userList",data:function(){return{isAdd:!1,formTitle:"",dialogVisible:!1,form:{id:0,foodThumb:"",foodName:"",foodDesc:"",price:"",createTime:""},formInline:{foodName:""},listData:[],pageIndex:1,pageSize:15,pageTotal:0,rules:{foodName:[{required:!0,message:"请输入菜品名称",trigger:["blur","change"]},{required:!0,min:2,max:128,message:"菜品名称不能小于2或大于128个字符",trigger:["blur","change"]}],price:[{required:!0,message:"请选择菜品价格",trigger:["blur","change"]}]}}},methods:{getAdminList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,i={foodName:this.formInline.foodName,pageIndex:t,pageSize:o};r.b.getFoodList(i).then(function(i){var a=[],r=0,s=(t-1)*o+1;i.data&&(i.data.list.forEach(function(e,t){a.push({rowId:s,id:e.id,foodName:e.foodName,price:e.price,createTime:e.createTime}),s++}),r=i.data.total),e.listData=a,e.pageTotal=r})},getFoodInfo:function(e){var t=this;r.b.getFoodInfo(e).then(function(e){if(e.data){var o=e.data,i={id:o.id,foodThumb:o.foodThumb,foodName:o.foodName,foodDesc:o.foodDesc,price:o.price,createTime:o.createTime};t.form=i}})},addFoodInfo:function(){var e=this,t={foodThumb:this.form.foodThumb,foodName:this.form.foodName,foodDesc:this.form.foodDesc,price:this.form.price};r.b.addFoodInfo(t).then(function(t){t.data&&(0==t.data.err?(e.$message({type:"success",message:"保存成功!"}),e.dialogVisible=!1,e.getAdminList()):e.$message({type:"error",message:"保存失败!"}))})},updateFoodInfo:function(){var e=this,t={id:this.form.id,foodThumb:this.form.foodThumb,foodName:this.form.foodName,foodDesc:this.form.foodDesc,price:this.form.price};r.c.updateFoodInfo(t).then(function(t){t.data&&(0==t.data.err?(e.$message({type:"success",message:"保存成功!"}),e.dialogVisible=!1,e.getAdminList()):e.$message({type:"error",message:"保存失败!"}))})},deleteFoodInfo:function(e){var t=this;r.c.deleteFoodInfo(e).then(function(e){e.data&&0==e.data.err&&(t.$message({type:"success",message:"删除成功!"}),t.getAdminList())})},clearForm:function(){this.$refs.ruleForm&&this.$refs.ruleForm.resetFields(),this.form={id:0,foodName:"",foodDesc:"",price:""}},beforeFoodImgUpload:function(){},handleFoodImgSuccess:function(){},changeFoodImgChange:function(e,t){var o=this;console.log(e);var i="image/jpeg"===e.raw.type,a=e.raw.size/1024/1024<2;i||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),this.getBase64(e.raw).then(function(e){e.split(",").length>0&&o.uploadFoodImg(e)})},getBase64:function(e){return new a.a(function(t,o){var i=new FileReader,a="";i.readAsDataURL(e),i.onload=function(){a=i.result},i.onerror=function(e){o(e)},i.onloadend=function(){t(a)}})},uploadFoodImg:function(e){var t=this,o={file:e};r.c.uploadFoodImg(o).then(function(e){e.data&&(t.form.foodThumb=e.data.foodThumb)})},submitForm:function(){this.getAdminList()},addUser:function(){this.formTitle="新增菜品",this.isAdd=!0,this.dialogVisible=!0,this.clearForm()},goToDetail:function(e){this.formTitle="编辑菜品",this.isAdd=!1,this.dialogVisible=!0,this.clearForm(),this.getFoodInfo(e)},submitAddForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.isAdd?t.addFoodInfo():t.updateFoodInfo()})},cancelForm:function(){this.dialogVisible=!1},deleteFood:function(e){var t=this;this.$confirm('是否删除菜品名称为"'+e.foodName+'"的菜品?',"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.deleteFoodInfo(e.id)}).catch(function(){})},handleSizeChange:function(e){this.pageSize=e,this.getAdminList(this.pageIndex,e)},handleCurrentChange:function(e){this.pageIndex=e,this.getAdminList(e,this.pageSize)}},mounted:function(){this.getAdminList()}},n={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"userList"},[o("div",{staticClass:"wrapper"},[o("div",{staticClass:"queryList"},[o("el-form",{staticClass:"form-inline",attrs:{inline:!0,model:e.formInline}},[o("el-row",[o("el-col",{attrs:{span:18}},[o("el-form-item",{staticStyle:{width:"150px"},attrs:{prop:"foodName"}},[o("el-input",{attrs:{size:"small",clearable:"",placeholder:"请输入菜品名称"},model:{value:e.formInline.foodName,callback:function(t){e.$set(e.formInline,"foodName","string"==typeof t?t.trim():t)},expression:"formInline.foodName"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:6}},[o("el-form-item",{staticStyle:{float:"right"}},[o("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.submitForm("formInline")}}},[e._v("查询")]),e._v(" "),o("el-button",{attrs:{size:"small",icon:"el-icon-plus",type:"default"},on:{click:e.addUser}},[e._v("添加菜品")])],1)],1)],1)],1)],1),e._v(" "),o("div",{staticClass:"tableCom",staticStyle:{"margin-top":"15px"}},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.listData,border:""}},[o("el-table-column",{attrs:{prop:"rowId",label:"序号",width:"50"}}),e._v(" "),o("el-table-column",{attrs:{prop:"foodName",width:"200",label:"菜品名称"}}),e._v(" "),o("el-table-column",{attrs:{prop:"price",width:"200",label:"价格"}}),e._v(" "),o("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),e._v(" "),o("el-table-column",{staticStyle:{display:"none"},attrs:{fixed:"right",align:"center",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){return e.goToDetail(t.row.id)}}},[e._v("详情")]),e._v(" "),o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){return e.deleteFood(t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),o("div",{staticClass:"pagination",staticStyle:{"margin-top":"15px"}},[o("el-pagination",{attrs:{"page-sizes":[15,30,45,60],"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:e.pageTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),o("div",{staticClass:"dialogBox"},[o("el-dialog",{attrs:{title:e.formTitle,visible:e.dialogVisible,"show-close":!0,width:"750px"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.cancelForm}},[o("div",{staticClass:"wrapper"},[o("div",[o("el-form",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[o("el-row",[o("el-col",{attrs:{span:24}},[o("div",{staticClass:"grid-content bg-purple"},[e._e(),e._v(" "),o("el-form-item",{attrs:{label:"菜品名称：",prop:"foodName"}},[o("el-input",{staticStyle:{width:"180px"},attrs:{size:"small",clearable:"",placeholder:"请输入菜品名称"},model:{value:e.form.foodName,callback:function(t){e.$set(e.form,"foodName","string"==typeof t?t.trim():t)},expression:"form.foodName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"描述：",prop:"foodDesc"}},[o("el-input",{staticStyle:{width:"90%"},attrs:{size:"small",clearable:"",placeholder:"请输入菜品描述"},model:{value:e.form.foodDesc,callback:function(t){e.$set(e.form,"foodDesc","string"==typeof t?t.trim():t)},expression:"form.foodDesc"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"价格：",prop:"price"}},[o("el-input",{staticStyle:{width:"180px"},attrs:{size:"small",clearable:"",placeholder:"请输入菜品价格"},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price","string"==typeof t?t.trim():t)},expression:"form.price"}})],1),e._v(" "),0==e.isAdd?o("el-form-item",{attrs:{label:"创建时间：",prop:"createTime"}},[o("span",[e._v(e._s(e.form.createTime))])]):e._e()],1)])],1)],1)],1)]),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.cancelForm()}}},[e._v("取消")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.submitAddForm("ruleForm")}}},[e._v("保存")])],1)])],1)])])},staticRenderFns:[]};var l=o("VU/8")(s,n,!1,function(e){o("/+g+")},null,null);t.default=l.exports}});
//# sourceMappingURL=4.5f4d28bd237461a76339.js.map