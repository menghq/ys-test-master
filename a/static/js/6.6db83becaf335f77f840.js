webpackJsonp([6],{i5I0:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("t5DY"),r={name:"userList",data:function(){return{isAdd:!1,dialogVisible:!1,form:{id:"",gradeName:""},formInline:{gradeName:""},schoolData:[],listData:[],pageIndex:1,pageSize:15,pageTotal:0,rules:{gradeName:[{required:!0,message:"请输入部门名称",trigger:["blur","change"]}]}}},methods:{getGradeList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,r={gradeName:this.formInline.gradeName,pageIndex:t,pageSize:a};i.e.getGradeList(r).then(function(i){var r=[],s=0,l=(t-1)*a+1;i.data&&(i.data.list.forEach(function(e,t){r.push({rowId:l,id:e.id,gradeName:e.gradeName,createTime:e.createTime}),l++}),s=i.data.total),e.listData=r,e.pageTotal=s})},addGradeInfo:function(){var e=this,t={gradeName:this.form.gradeName};i.e.addGradeInfo(t).then(function(t){t.data&&(0==t.data.err?(e.$message({type:"success",message:"保存成功!"}),e.dialogVisible=!1,e.getGradeList()):e.$message({type:"error",message:"保存失败!"}))})},deleteGradeInfo:function(e){var t=this;i.e.deleteGradeInfo(e).then(function(e){e.data&&0==e.data.err&&(t.$message({type:"success",message:"删除成功!"}),t.getGradeList())})},resetForm:function(){this.formInline.userName="",this.formInline.schoolAreaId="",this.formInline.studentType=""},submitForm:function(){this.getGradeList()},addUser:function(){this.isAdd=!0,this.form.gradeName="",this.dialogVisible=!0,this.$refs.ruleForm&&this.$refs.ruleForm.resetFields()},submitAddForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.addGradeInfo()})},cancelForm:function(e){this.dialogVisible=!1},deleteUser:function(e){var t=this;this.$confirm("是否删除部门?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.deleteGradeInfo(e.id)}).catch(function(){})},handleSizeChange:function(e){this.pageSize=e,this.getGradeList(this.pageIndex,e)},handleCurrentChange:function(e){this.pageIndex=e,this.getGradeList(e,this.pageSize)}},mounted:function(){this.getGradeList()}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"userList"},[a("div",{staticClass:"wrapper"},[a("div",{staticClass:"queryList"},[a("el-form",{staticClass:"form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-row",[a("el-col",{attrs:{span:18}},[a("el-form-item",{staticStyle:{width:"180px"},attrs:{prop:"gradeName"}},[a("el-input",{attrs:{size:"small",clearable:"",placeholder:"请输入部门名称"},model:{value:e.formInline.gradeName,callback:function(t){e.$set(e.formInline,"gradeName","string"==typeof t?t.trim():t)},expression:"formInline.gradeName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticStyle:{float:"right"}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.submitForm("formInline")}}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"small",icon:"el-icon-plus",type:"default"},on:{click:e.addUser}},[e._v("添加部门")])],1)],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"tableCom",staticStyle:{"margin-top":"15px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.listData,border:""}},[a("el-table-column",{attrs:{prop:"rowId",label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"gradeName",label:"部门名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",align:"center",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.deleteUser(t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"pagination",staticStyle:{"margin-top":"15px"}},[a("el-pagination",{attrs:{"page-sizes":[15,30,45,60],"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:e.pageTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("div",{staticClass:"dialogBox"},[a("el-dialog",{attrs:{title:e.isAdd?"添加部门":"编辑部门",visible:e.dialogVisible,"show-close":!0,width:"750px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"wrapper"},[a("el-form",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"部门名称：",prop:"gradeName"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{size:"small",clearable:"",placeholder:"请输入部门名称"},model:{value:e.form.gradeName,callback:function(t){e.$set(e.form,"gradeName","string"==typeof t?t.trim():t)},expression:"form.gradeName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:14}})],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.cancelForm("ruleForm")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.submitAddForm("ruleForm")}}},[e._v("确 定")])],1)])],1)])])},staticRenderFns:[]};var l=a("VU/8")(r,s,!1,function(e){a("l4Tr")},null,null);t.default=l.exports},l4Tr:function(e,t){}});
//# sourceMappingURL=6.6db83becaf335f77f840.js.map